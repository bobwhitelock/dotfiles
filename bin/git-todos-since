#!/bin/bash

# Function to find TODO or XXX added since a given commit or branch
find_todos_since_commit() {
  # Check if a commit or branch is provided
  if [ -z "$1" ]; then
    echo "Usage: $0 <commit-or-branch>"
    exit 1
  fi

  # Get the commit or branch
  COMMIT_OR_BRANCH=$1

  # Get the list of added lines containing TODO or XXX since the given commit/branch
  git diff "$COMMIT_OR_BRANCH" --unified=0 | \
  rg '^\+' | \
  rg 'TODO|XXX|FIXME' | \
  sed 's/^+//g' | \
  awk -F: '{print $1 ":" NR ":" $2}'
}

# Call the function with the provided argument
find_todos_since_commit "$1"
