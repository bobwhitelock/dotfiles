#!/usr/bin/env python3

import sys
import re

# Extract URLs from a file given as the first argument, or stdin, and output
# one URL per line.

URL_PATTERN = r'https?://[^\s<>"{}|\\^`\[\]()]+'


def main():
    if len(sys.argv) > 1:
        with open(sys.argv[1], "r") as f:
            extract_urls_from_lines(f)
    else:
        extract_urls_from_lines(sys.stdin)


def extract_urls_from_lines(lines):
    for line in lines:
        urls = re.findall(URL_PATTERN, line)
        for url in urls:
            print(url)


if __name__ == "__main__":
    main()
